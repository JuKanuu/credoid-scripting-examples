from bottle import route, run, static_file
import json

event_list = []

@route('/events')
def hello(name):
    output = json.dumps(event_list)
    del event_list[:]
    return output
    

@route('/<filename>')
def server_static(filename):
    f = open(filename, "r")
    return f.read()

def on_init():
    run(host='localhost', port=8080)

print "Hosting..."

def on_event(event):
    event_list.append(event.localizedTypeName)